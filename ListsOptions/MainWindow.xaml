<Window
    x:Class="ListsOptions.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:ListsOptionsUI.Converters"
    xmlns:helpers="clr-namespace:ListsOptionsUI.Helpers"
    xmlns:local="clr-namespace:ListsOptionsUI.Views"
    Title="MainWindow"
    Width="900"
    Height="550"
    MinWidth="1100"
    MinHeight="700"
    Background="#F5F5F5">
    <Window.Resources>
        <converters:BooleanToActiveTabColorConverter x:Key="BooleanToActiveTabColorConverter" />
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!--  Навигационна лента  -->
        <Border
            Grid.Row="0"
            Grid.ColumnSpan="2"
            Padding="10"
            CornerRadius="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  Бутони за навигация  -->
                <StackPanel
                    Grid.Column="0"
                    Margin="0"
                    Orientation="Horizontal">
                    <Button
                        Padding="10,5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Command="{Binding OpenFacilityCommand}"
                        Content="Хотелски удобства"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="White" />
                    <Button
                        Padding="10,5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Command="{Binding OpenPaymentMethodCommand}"
                        Content="Методи за плащане"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="White" />
                    <Button
                        Padding="10,5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Command="{Binding OpenRoomTypeCommand}"
                        Content="Типове стаи"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="White" />
                    <Button
                        Padding="10,5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Command="{Binding OpenHotelConfigurationCommand}"
                        Content="Хотели"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="White" />
                    <Button
                        Padding="10,5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Command="{Binding OpenReservationCreatingCommand}"
                        Content="Резервация"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="White" />
                    <Button
                        Padding="10,5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Command="{Binding OpenReservationsListCommand}"
                        Content="Списък с резервации"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="White" />
                </StackPanel>

                <!--  Останалата част от лентата с различен цвят  -->
                <Border
                    Grid.Column="1"
                    Margin="10,0,0,0"
                    CornerRadius="15" />
            </Grid>
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Offset="0" Color="#43cea2" />
                    <GradientStop Offset="1" Color="#185a9d" />
                </LinearGradientBrush>


                <!--<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#11998e" Offset="0"/>
                    <GradientStop Color="#38ef7d" Offset="1"/>
                </LinearGradientBrush>-->

            </Border.Background>
        </Border>

        <!--  Логин панел  -->
        <Border
            Grid.Row="1"
            Grid.RowSpan="1"
            Grid.Column="0"
            Margin="10"
            Padding="15"
            CornerRadius="10">
            <local:UserView DataContext="{Binding UserViewModel}" />
        </Border>

        <!--  Табове вляво  -->
        <Border
            Grid.Row="2"
            Grid.Column="0"
            Margin="10"
            Padding="10"
            Background="White"
            CornerRadius="10">
            <StackPanel>
                <TextBlock
                    Margin="0,0,0,10"
                    FontSize="16"
                    FontWeight="Bold"
                    Text="Отворени табове:" />

                <!--  Списък с отворени табове  -->
                <ItemsControl ItemsSource="{Binding OpenTabs}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border
                                Margin="5"
                                Padding="5"
                                BorderThickness="2"
                                CornerRadius="5">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <!--  Default: неактивен таб  -->
                                        <Setter Property="Background" Value="White" />
                                        <Setter Property="BorderBrush" Value="{StaticResource SecondaryBrush}" />
                                        <Style.Triggers>
                                            <!--  Активен таб  -->
                                            <DataTrigger Binding="{Binding IsActive}" Value="True">
                                                <Setter Property="Background" Value="{StaticResource SecondaryBrush}" />
                                                <Setter Property="BorderBrush" Value="Transparent" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>

                                <Grid>
                                    <!--  Цялата зона кликваема  -->
                                    <Button
                                        Background="Transparent"
                                        BorderBrush="Transparent"
                                        Command="{Binding SelectTabCommand}">
                                        <Grid>
                                            <TextBlock
                                                Margin="5,0,15,0"
                                                VerticalAlignment="Center"
                                                FontSize="14"
                                                FontWeight="Bold"
                                                Text="{Binding Title}"
                                                TextWrapping="Wrap">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <!--  Default: неактивен  -->
                                                        <Setter Property="Foreground" Value="Black" />
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding IsActive}" Value="True">
                                                                <Setter Property="Foreground" Value="White" />
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </Grid>
                                    </Button>

                                    <!--  Бутон за затваряне  -->
                                    <Button
                                        Padding="0,0"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Background="Transparent"
                                        BorderBrush="Transparent"
                                        Command="{Binding CloseCommand}"
                                        Content="✖"
                                        Cursor="Hand"
                                        FontSize="15">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <!--  Default: неактивен таб  -->
                                                <Setter Property="Foreground" Value="{StaticResource SecondaryBrush}" />
                                                <Setter Property="Background" Value="Transparent" />
                                                <Setter Property="BorderBrush" Value="Transparent" />
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <!--  Активен таб  -->
                                                    <DataTrigger Binding="{Binding IsActive}" Value="True">
                                                        <Setter Property="Foreground" Value="White" />
                                                        <Setter Property="Background" Value="Red" />
                                                        <Setter Property="FontSize" Value="18" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>


            </StackPanel>
        </Border>

        <!--  Основно съдържание  -->
        <Border
            Grid.Row="1"
            Grid.RowSpan="2"
            Grid.Column="1"
            Margin="10"
            Padding="15"
            Background="{StaticResource MainGradientBrush}"
            CornerRadius="10">
            <ContentControl Content="{Binding SelectedView, UpdateSourceTrigger=PropertyChanged}" />
            <!--<Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Offset="0" Color="#43cea2" />
                    <GradientStop Offset="1" Color="#185a9d" />
                </LinearGradientBrush>

            </Border.Background>-->
        </Border>
    </Grid>
</Window>

