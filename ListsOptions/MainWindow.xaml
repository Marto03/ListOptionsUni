<Window
    x:Class="ListsOptions.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:ListsOptionsUI.Converters"
    xmlns:helpers="clr-namespace:ListsOptionsUI.Helpers"
    xmlns:local="clr-namespace:ListsOptionsUI.Views"
    Title="MainWindow"
    Width="900"
    Height="550"
    MinWidth="900"
    MinHeight="700"
    Background="#F5F5F5">
    <Window.Resources>
        <converters:BooleanToActiveTabColorConverter x:Key="BooleanToActiveTabColorConverter" />
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!--  Навигационна лента  -->
        <Border
            Grid.Row="0"
            Grid.ColumnSpan="2"
            Padding="10"
            Background="#333"
            CornerRadius="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  Бутони за навигация  -->
                <StackPanel
                    Grid.Column="0"
                    Margin="5"
                    Orientation="Horizontal">
                    <Button
                        Padding="10,5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Command="{Binding OpenFacilityCommand}"
                        Content="Facility"
                        FontSize="14"
                        Foreground="White" />
                    <Button
                        Padding="10,5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Command="{Binding OpenPaymentMethodCommand}"
                        Content="Payment Methods"
                        FontSize="14"
                        Foreground="White" />
                    <Button
                        Padding="10,5"
                        Background="Transparent"
                        BorderBrush="Transparent"
                        Command="{Binding OpenRoomTypeCommand}"
                        Content="Room Types"
                        FontSize="14"
                        Foreground="White" />
                </StackPanel>

                <!--  Останалата част от лентата с различен цвят  -->
                <Border
                    Grid.Column="1"
                    Margin="10,0,0,0"
                    Background="#555"
                    CornerRadius="15" />
            </Grid>
        </Border>

        <!--  Логин панел  -->
        <Border
            Grid.Row="1"
            Grid.RowSpan="1"
            Grid.Column="0"
            Margin="10"
            Padding="15"
            Background="White"
            CornerRadius="10">
            <!--<StackPanel>
                <TextBlock Text="{Binding UserViewModel.CurrentUser}" />
                <TextBlock
                    FontSize="20"
                    FontWeight="Bold"
                    Foreground="#333"
                    Text="Вход" />
                <TextBlock Margin="0,10,0,0" Text="Потребител:" />
                <TextBox Margin="0,5,0,0" Text="{Binding UserViewModel.Username, UpdateSourceTrigger=PropertyChanged}" />
                <TextBlock Margin="0,10,0,0" Text="Парола:" />
                <PasswordBox
                    Margin="0,5,0,10"
                    helpers:PasswordBoxHelper.BindPassword="True"
                    helpers:PasswordBoxHelper.BoundPassword="{Binding UserViewModel.Password, Mode=TwoWay}" />

                <Button
                    Width="100"
                    Background="#0078D7"
                    Command="{Binding UserViewModel.LoginCommand}"
                    Content="Вход"
                    Foreground="White" />
                <Button
                    Margin="5"
                    Background="#0078D7"
                    Command="{Binding OpenUserConfigurationCommand}"
                    Content="Конфигурация на потребители"
                    Foreground="White" />
            </StackPanel>-->
            <local:UserView DataContext="{Binding UserViewModel}" />
        </Border>

        <!--  Табове вляво  -->
        <Border
            Grid.Row="2"
            Grid.Column="0"
            Margin="10"
            Padding="10"
            Background="White"
            CornerRadius="10">
            <StackPanel>
                <TextBlock
                    Margin="0,0,0,10"
                    FontSize="16"
                    FontWeight="Bold"
                    Text="Отворени табове:" />

                <!--  Списък с отворени табове  -->

                <ItemsControl ItemsSource="{Binding OpenTabs}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border
                                Padding="5"
                                Background="{Binding IsActive, Converter={StaticResource BooleanToActiveTabColorConverter}}"
                                CornerRadius="5">
                                <Grid>
                                    <!--  Това ще направи така, че цялата зона да е кликваема  -->
                                    <Button
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"
                                        Background="Transparent"
                                        BorderBrush="Transparent"
                                        Command="{Binding SelectTabCommand}">
                                        <Grid>
                                            <TextBlock
                                                Margin="5"
                                                VerticalAlignment="Center"
                                                Text="{Binding Title}" />
                                        </Grid>
                                    </Button>

                                    <!--  Бутонът за затваряне, който остава вдясно  -->
                                    <Button
                                        Padding="5"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Background="Transparent"
                                        BorderBrush="Transparent"
                                        Command="{Binding CloseCommand}"
                                        Content="✖"
                                        Foreground="Red" />
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>


                <!--<ItemsControl ItemsSource="{Binding OpenTabs}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="0,5,0,0" Orientation="Horizontal">
                                <Border
                                    Width="150"
                                    Margin="0,0,10,0"
                                    Padding="10"
                                    Background="{Binding IsActive, Converter={StaticResource BooleanToActiveTabColorConverter}}"
                                    CornerRadius="15">
                                    <TextBlock
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        FontWeight="SemiBold"
                                        Foreground="White"
                                        Text="{Binding Title}" />
                                    <Border.InputBindings>
                                        <MouseBinding Command="{Binding SelectTabCommand}" Gesture="LeftClick" />
                                    </Border.InputBindings>
                                </Border>

                -->
                <!--  Бутона за затваряне на таба  -->
                <!--
                                <Button
                                    Width="25"
                                    Height="25"
                                    Margin="5,0,0,0"
                                    Background="Transparent"
                                    BorderBrush="Transparent"
                                    Command="{Binding CloseCommand}"
                                    Content="✖"
                                    FontSize="14"
                                    Foreground="Red" />
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>-->
            </StackPanel>
        </Border>

        <!--  Основно съдържание  -->
        <Border
            Grid.Row="1"
            Grid.RowSpan="2"
            Grid.Column="1"
            Margin="10"
            Padding="15"
            Background="White"
            CornerRadius="10">
            <ContentControl Content="{Binding SelectedView, UpdateSourceTrigger=PropertyChanged}" />
        </Border>
    </Grid>
</Window>

